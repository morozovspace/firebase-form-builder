#!/bin/bash
# Copyright (C) 2020 Nikita Morozov morozov.space@mail.ru - All Rights Reserved
docker build  \
  --tag firebase:auth \
  --target firebase \
  -f ./services/firebase/docker/Dockerfile \
  ./services/firebase;

docker run \
  -it \
  --detach-keys="ctrl-d" \
  --sig-proxy=true \
  --name firebase-tools \
  firebase:auth \
  sh -c \
    "firebase login:ci --interactive --no-localhost && \
     echo 'Save your token in .env file, generated by default'";

docker container stop firebase-tools
docker container rm firebase-tools
docker image rm firebase:auth